<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite">


<composite:interface>
	<!-- fileArray -->
	<composite:attribute name="fileArray" required="true" />

	<!-- fileSelected -->
	<composite:attribute name="fileSelected" required="true" />

	<!-- pdfContent -->
	<composite:attribute name="pdfContent" required="true" />

</composite:interface>

<composite:implementation>

	<h:form id="dialogContent">

		<div class="defaulDilaogHeaderDivWithBackground">
			<h:panelGrid style="width:100%;" columns="2"
				styleClass="noBordersAll noPaddingAll collapsedBordersAll">
				<h:outputLabel value="#{msg['dialog.media.headline']}" />
				<p:commandLink title="#{msg['general.close']}" style="float:right;"
					styleClass="noUnderlineAtLink"
					onclick="$('#dialogContent\\:closeBtn').click();return false;">
					<i class="fa fa-fw fa-times" />
				</p:commandLink>
			</h:panelGrid>
		</div>

		<div class="contentDiv">
			<h:panelGrid columns="3" styleClass="defaultListingTableContainer"
				columnClasses="defaultListingTableColumnTop defaultListingTableColumn25,">
				<!-- left column -->

				<h:panelGrid columns="1"
					styleClass="defaultListingTableContainer navigation">
					<!-- Nav Table -->
					<p:dataTable var="pdf" id="patientList"
						value="#{cc.attrs.fileArray}" selectionMode="single"
						scrollHeight="600" scrollable="true"
						selection="#{cc.attrs.fileSelected}" rowKey="#{pdf.id}"
						styleClass="navTable">

						<p:ajax event="rowSelect" update="@form" />

						<p:column>
							<!-- Header -->
							<f:facet name="header">
								test
								</f:facet>

							<h:panelGrid columns="2" styleClass="contentTable noBordersAll">
								<h:outputText value="Name" />
								<h:outputText value="#{pdf.name}" style="font-weight: bold" />

								<h:outputText value="Datum" />
								<h:outputText
									value="#{mainHandlerAction.date(pdf.creationDate, enumProvider.getDateFormat('GERMAN_DATE_TIME'))}"
									style="font-weight: bold" />

								<h:outputText value="Typ" />
								<h:outputText value="#{pdf.type}" style="font-weight: bold" />
							</h:panelGrid>
						</p:column>
					</p:dataTable>
				</h:panelGrid>

				<h:panelGroup />

				<!-- right column -->
				<h:panelGrid columns="1" styleClass="defaultListingTableContainer">

					<h:panelGroup id="pdfRender2">
						<p:media player="pdf" value="#{cc.attrs.pdfContent}"
							rendered="#{cc.attrs.fileSelected ne null}" width="100%"
							height="630px"></p:media>
					</h:panelGroup>
				</h:panelGrid>
			</h:panelGrid>
		</div>

		<div class="buttonContainer" style="width: 100% !important">
			<h:panelGrid columns="2" style="width:100%"
				styleClass="noBordersAll collapsedBordersAll noPaddingAll">

				<h:panelGrid columns="1">
					<p:commandButton value="Datei hochladen" icon="fa fa-print"
						styleClass="smallButton buttonLeftMarginInList"
						actionListener="#{mediaHandlerAction.prepareTaskDataUploadDialog(taskHandlerAction.temporaryTask)}">
						<p:ajax event="dialogReturn" update="@form" />
					</p:commandButton>
				</h:panelGrid>


				<h:panelGrid columns="4" style="float:right;">
					<!-- print -->
					<p:commandButton value="Drucken" icon="fa fa-print"
						styleClass="smallButton buttonRighMarginInListExtended"
						actionListener="#{printHandlerAction.onPrintPdf(mediaHandlerAction.temporaryPdfContainer)}"></p:commandButton>


					<!-- select printer -->
					<p:selectOneMenu styleClass="customSerachSelectMenu"
						panelStyleClass="customSerachSelectMenuPanel"
						value="#{printHandlerAction.selectedPrinter}" filter="true"
						filterMatchMode="contains" style="margin-right:10px">

						<f:selectItems
							value="#{mainHandlerAction.settings.printerManager.printers}"
							var="printer" itemLabel="#{printer.name}"
							itemValue="#{printer.name}" />
					</p:selectOneMenu>

					<p:commandButton value="Ã–ffnen" icon="fa fa-download" ajax="false"
						disabled="#{mediaHandlerAction.temporaryPdfContainer eq null}"
						styleClass="smallButton buttonRighMarginInListExtended">
						<p:fileDownload value="#{mediaHandlerAction.pdfContent}" />
					</p:commandButton>

					<!-- Abort button -->
					<p:commandButton value="#{msg['general.close']}" id="closeBtn"
						styleClass="smallButton buttonRighMarginInList"
						icon="fa fa-times-circle"
						actionListener="#{mediaHandlerAction.hideMediaDisplayDialog()}" />
				</h:panelGrid>
			</h:panelGrid>
		</div>
	</h:form>
</composite:implementation>
</html>

