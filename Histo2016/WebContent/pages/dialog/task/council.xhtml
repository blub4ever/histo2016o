<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
	<title><h:outputFormat
			value="#{msg['dialog.createTask.Headline']}" /></title>
	<h:outputStylesheet name="histo.css" value="histo.css" />
</h:head>


<h:body styleClass="defaultDialogLayout">
	<h:form enctype="multipart/form-data">
		<div class="dialogContent">
			<h:panelGrid columns="2"
				styleClass="dialogTable smallPaddingVerticalAll standardFont"
				style="width:100%" columnClasses="taskTextColunm,">

				<h:outputLabel value="Konsil an:"></h:outputLabel>

				<p:selectOneMenu disabled="#{diagnosis.finalized}"
					styleClass="diagnosisSelectMenu"
					value="#{worklistHandlerAction.selectedPatient.selectedTask.council.councilPhysician}"
					panelStyleClass="diagnosisSelectMenuPanel"
					converter="#{taskHandlerAction.allAvailablePhysiciansTransformer}"
					filter="true" filterMatchMode="contains">
					<f:selectItem
						itemLabel="#{msg['body.receiptlog.tab.diangonsis.data.diangosis.choose']}"
						itemValue="#{null}" />

					<f:selectItems value="#{taskHandlerAction.allAvailablePhysicians}"
						var="allAvailablePhysicians"
						itemLabel="#{allAvailablePhysicians.physician.fullName}"
						itemValue="#{allAvailablePhysicians}" />

					<p:ajax process="@this" event="change">
					</p:ajax>
				</p:selectOneMenu>

				<h:outputLabel value="Anforderung"></h:outputLabel>
				<h:inputText value="#{worklistHandlerAction.selectedPatient.selectedTask.council.councilText}"></h:inputText>

				<h:outputLabel value="Anlage"></h:outputLabel>
				<h:inputText value="#{worklistHandlerAction.selectedPatient.selectedTask.council.attachment}"></h:inputText>

				<h:outputLabel value="Gezeichnet:"></h:outputLabel>

				<h:panelGroup>
					<p:selectOneMenu disabled="#{diagnosis.finalized}"
						styleClass="diagnosisSelectMenu"
						panelStyleClass="diagnosisSelectMenuPanel"
						value="#{worklistHandlerAction.selectedPatient.selectedTask.council.physicianRequestingCouncil}"
						converter="#{taskHandlerAction.allAvailablePhysiciansTransformer}"
						filter="true" filterMatchMode="contains">
						<f:selectItem
							itemLabel="#{msg['body.receiptlog.tab.diangonsis.data.diangosis.choose']}"
							itemValue="#{null}" />

						<f:selectItems value="#{taskHandlerAction.allAvailablePhysicians}"
							var="allAvailablePhysicians"
							itemLabel="#{allAvailablePhysicians.physician.fullName}"
							itemValue="#{allAvailablePhysicians}" />

						<p:ajax process="@this" event="change">
						</p:ajax>
					</p:selectOneMenu>
					<p:commandLink title="#{msg['body.receiptlog.notification.hint']}"
						rendered="#{!worklistHandlerAction.selectedPatient.selectedTask.diagnosisCompleted}"
						style="float: right; margin-right:5px;"
						actionListener="#{contactHandlerAction.prepareContacts(worklistHandlerAction.selectedPatient.selectedTask,contactHandlerAction.physicianRoleOptions.surgeon,contactHandlerAction.physicianRoleOptions.privatePhysician,contactHandlerAction.physicianRoleOptions.other,contactHandlerAction.physicianRoleOptions.showAddedContactsOnly)}">
						<i class="fa fa-fw fa-cog" />
						<p:ajax event="dialogReturn" update="" />
					</p:commandLink>
				</h:panelGroup>

			</h:panelGrid>


		</div>
		<div class="buttonContainer">
			<p:commandButton value="Anforderung drucken"
				icon="fa fa-check-circle-o" styleClass="smallButton"
				actionListener="#{taskHandlerAction.printCouncilReport(taskHandlerAction.temporaryTask)}"></p:commandButton>
			<p:commandButton value="#{msg['general.abort']}"
				styleClass="smallButton buttonLeftMarginInList"
				icon="fa fa-times-circle"
				actionListener="#{mainHandlerAction.hideDialog(enumProvider.getDialog('TASK_CREATE'))}"></p:commandButton>
		</div>
	</h:form>
</h:body>
</html>