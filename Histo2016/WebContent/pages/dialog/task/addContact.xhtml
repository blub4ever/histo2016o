<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title><h:outputFormat
			value="#{msg['dialog.contact.headline']}">
		</h:outputFormat></title>
	<h:outputStylesheet name="histo.css" value="histo.css" />
</h:head>


<h:body styleClass="bigDialog">
	<h:form>
		<p:panel styleClass="dialogPannel">
			<p:layout styleClass="dialogLayout">

				<p:layoutUnit styleClass="center" position="center">
					<!-- Contact Datatable -->
					<p:dataTable var="contact"
						styleClass="contactDataTable noBordersAll collapsedBordersAll"
						scrollable="true" scrollHeight="390"
						value="#{worklistHandlerAction.allAvailableContact}">

						<p:column headerText="#{msg['dialog.contact.table.name']}"
							filterBy="#{contact.physician.person.name}"
							filterMatchMode="contains">
							<h:outputLabel
								value="#{contact.physician.title} #{contact.physician.name}, #{contact.physician.surname}" />
						</p:column>

						<p:column headerText="#{msg['dialog.contact.table.role']}">
							<ul class="roleList">
								<ui:fragment rendered="#{contact.physician.roleSurgeon}">
									<li>#{msg['dialog.contact.table.role.surgeon']}</li>
								</ui:fragment>
								<ui:fragment rendered="#{contact.physician.extern}">
									<li>#{msg['dialog.contact.table.role.roleResidentDoctor']}</li>
								</ui:fragment>
								<ui:fragment rendered="#{contact.physician.other}">
									<li>#{msg['dialog.contact.table.role.roleMiscellaneous']}</li>
								</ui:fragment>
							</ul>
						</p:column>

						<p:column headerText="#{msg['dialog.contact.table.function']}">
							<p:selectOneMenu styleClass="taskSelectOnMenu"
								value="#{contact.role}">
								<f:selectItem
									itemLabel="#{msg['dialog.contact.table.function.none']}"
									itemValue="0" />
								<f:selectItem
									itemLabel="#{msg['dialog.contact.table.function.surgeon']}"
									itemValue="1" />
								<f:selectItem
									itemLabel="#{msg['dialog.contact.table.function.extern']}"
									itemValue="2" />
								<f:selectItem
									itemLabel="#{msg['dialog.contact.table.function.other']}"
									itemValue="3" />
								<p:ajax update="@form"
									listener="#{worklistHandlerAction.onContactChangeRole(contact)}"></p:ajax>
							</p:selectOneMenu>
						</p:column>

						<p:column>
							<f:facet name="header">
								<i class="fa fa-envelope-o"
									title="#{msg['dialog.contact.table.mail']}" />
							</f:facet>
							<p:selectBooleanCheckbox disabled="#{contact.role eq 0}"
								value="#{contact.useEmail}"
								title="#{msg['dialog.contact.table.mail']}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<i class="fa fa-phone"
									title="#{msg['dialog.contact.table.phone']}" />
							</f:facet>
							<p:selectBooleanCheckbox disabled="#{contact.role eq 0}"
								value="#{contact.usePhone}"
								title="#{msg['dialog.contact.table.phone']}" />
						</p:column>
						<p:column style="width:10px">
							<f:facet name="header">
								<i class="fa fa-fax" title="#{msg['dialog.contact.table.fax']}" />
							</f:facet>
							<p:selectBooleanCheckbox disabled="#{contact.role eq 0}"
								value="#{contact.useFax}"
								title="#{msg['dialog.contact.table.fax']}" />
						</p:column>
					</p:dataTable>
					<!-- Contact Datatable -->
				</p:layoutUnit>

				<p:layoutUnit styleClass="south" position="south">
					<h:panelGrid columns="2" style="width:100%;"
						styleClass="noBordersAll collapsedBordersAll noPaddingAll">

						<h:panelGrid columns="3">
							<p:commandButton value="#{msg['general.save']}"
								 icon="fa fa-fw fa-floppy-o"
								actionListener="#{worklistHandlerAction.updateContactList(worklistHandlerAction.allAvailableContact,worklistHandlerAction.selectedPatient.selectedTask)}"
								update="@form"></p:commandButton>

							<p:commandButton value="#{msg['general.abort']}"
								 icon="fa fa-fw fa-times-circle"
								actionListener="#{worklistHandlerAction.hideContactsDialog()}"
								update="@form"></p:commandButton>

							<h:panelGrid columns="2">
								<p:selectBooleanCheckbox styleClass="smallCheckbox"
									value="#{worklistHandlerAction.addedContacts}"
									style="margin-left:10px;">
									<p:ajax
										listener="#{worklistHandlerAction.prepareContacts(worklistHandlerAction.selectedPatient.selectedTask,worklistHandlerAction.personSurgeon,worklistHandlerAction.personExtern,worklistHandlerAction.personOther,worklistHandlerAction.addedContacts)}"
										update="@form"></p:ajax>
								</p:selectBooleanCheckbox>

								<h:outputLabel
									value="#{msg['dialog.contact.options.addedContacts']}"
									style="margin-left:5px;"></h:outputLabel>
							</h:panelGrid>
						</h:panelGrid>

						<h:panelGrid columns="6" style="float:right; margin-right:10px;">
							<p:selectBooleanCheckbox styleClass="smallCheckbox"
								disabled="#{worklistHandlerAction.addedContacts}"
								value="#{worklistHandlerAction.personSurgeon}">
								<p:ajax
									listener="#{worklistHandlerAction.prepareContacts(worklistHandlerAction.selectedPatient.selectedTask,worklistHandlerAction.personSurgeon,worklistHandlerAction.personExtern,worklistHandlerAction.personOther,worklistHandlerAction.addedContacts)}"
									update="@form"></p:ajax>
							</p:selectBooleanCheckbox>

							<h:outputLabel value="#{msg['dialog.contact.options.surgeon']}"
								style="margin-left:5px;"></h:outputLabel>

							<p:selectBooleanCheckbox styleClass="smallCheckbox"
								style="margin-left:10px;"
								disabled="#{worklistHandlerAction.addedContacts}"
								value="#{worklistHandlerAction.personExtern}">
								<p:ajax
									listener="#{worklistHandlerAction.prepareContacts(worklistHandlerAction.selectedPatient.selectedTask,worklistHandlerAction.personSurgeon,worklistHandlerAction.personExtern,worklistHandlerAction.personOther,worklistHandlerAction.addedContacts)}"
									update="@form"></p:ajax>
							</p:selectBooleanCheckbox>

							<h:outputLabel value="#{msg['dialog.contact.options.extern']}"
								style="margin-left:5px;"></h:outputLabel>

							<p:selectBooleanCheckbox styleClass="smallCheckbox"
								style="margin-left:10px;"
								disabled="#{worklistHandlerAction.addedContacts}"
								value="#{worklistHandlerAction.personOther}">
								<p:ajax
									listener="#{worklistHandlerAction.prepareContacts(worklistHandlerAction.selectedPatient.selectedTask,worklistHandlerAction.personSurgeon,worklistHandlerAction.personExtern,worklistHandlerAction.personOther,worklistHandlerAction.addedContacts)}"
									update="@form"></p:ajax>
							</p:selectBooleanCheckbox>
							<h:outputLabel value="#{msg['dialog.contact.options.other']}"
								style="margin-left:5px;"></h:outputLabel>
						</h:panelGrid>
					</h:panelGrid>
				</p:layoutUnit>
			</p:layout>
		</p:panel>
	</h:form>
</h:body>
</html>

