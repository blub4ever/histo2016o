<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<div class="contentDiv">
		<p:panel style="width:100%;"
			header="#{msg['dialog.settings.favouriteList.list.headline']}"
			styleClass="contentPannel" />

		<p:dataTable var="log" style="width:100%;" scrollable="true"
			scrollHeight="440"
			styleClass="highlightedDataTable noBordersAll collapsedBordersAll"
			value="#{settingsDialogHandler.getTab('LogTab').logs}">

			<p:column
				headerText="#{msg['dialog.settings.organization.list.name']}">

				<h:outputLabel value="#{log.timestamp}">
					<f:convertDateTime type="date" pattern="dd.MM.yyyy HH:mm" />
				</h:outputLabel>
			</p:column>

			<p:column
				headerText="#{msg['dialog.settings.organization.list.name']}">
				<h:outputText value="#{log.userAcc.username}" />
			</p:column>

			<p:column
				headerText="#{msg['dialog.settings.organization.list.note']}">
				<h:outputLabel value="#{log.logString}">
					<f:converter converterId="org.histo.ui.TruncateConverter" />
					<f:attribute name="truncateAt" value="25" />
					<f:attribute name="continuationMark" value="..." />
				</h:outputLabel>
			</p:column>

		</p:dataTable>
	</div>

	<div class="bottomDiv">
		<h:panelGrid columns="2" style="width:100%"
			styleClass="noBordersAll collapsedBordersAll noPaddingAll">

			<h:panelGrid columns="2">
				<h:panelGrid columns="2">
					<h:outputLabel value="#{msg['body.taskList.perPage']}" />
					<p:selectOneMenu
						value="#{settingsDialogHandler.getTab('LogTab').logsPerPull}"
						styleClass="smallInput">
						<f:selectItem itemLabel="50" itemValue="50" />
						<f:selectItem itemLabel="100" itemValue="100" />
						<f:selectItem itemLabel="200" itemValue="200" />

						<p:ajax event="change" process="@this"
							update=":adminForm:tabview:logs" partialSubmit="true"
							listener="#{settingsDialogHandler.getTab('LogTab').updateData()}"></p:ajax>
					</p:selectOneMenu>
				</h:panelGrid>

				<h:panelGrid columns="4">
					<h:outputLabel value="#{msg['body.taskList.page']}" />

					<p:spinner size="1"
						value="#{settingsDialogHandler.getTab('LogTab').selectedLogPage}"
						min="1"
						max="#{settingsDialogHandler.getTab('LogTab').maxLogPages}">
						<p:ajax event="change" process="@this"
							update=":adminForm:tabview:logs" partialSubmit="true"
							listener="#{settingsDialogHandler.getTab('LogTab').updateData()}" />
					</p:spinner>

					<h:outputLabel value="von #{settingsDialogHandler.getTab('LogTab').maxLogPages} Seiten" />

				</h:panelGrid>
			</h:panelGrid>

			<h:panelGrid columns="1" style="float:right;">

				<p:commandButton value="#{msg['general.close']}"
					styleClass="smallButton buttonRighMarginInList"
					icon="fa fa-times-circle" partialSubmit="true" process="@this"
					actionListener="#{settingsDialogHandler.hideDialog()}" />
			</h:panelGrid>
		</h:panelGrid>
	</div>
</ui:composition>
