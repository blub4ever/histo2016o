<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:histo="http://java.sun.com/jsf/composite/components">

	<p:outputPanel styleClass="headerPannel">
		<h:outputLabel
			value="#{settingsDialogHandler.organizationTab.newOrganization ? msg['dialog.settings.organization.edit.headline.new'] : msg['dialog.settings.organization.edit.headline.edit']}" />
	</p:outputPanel>


	<h:panelGrid columns="3"
		columnClasses="defaultListingTableColumn15 defaultListingTableColumnTop, defaultListingTableColumnTop, defaultListingTableColumnTop"
		styleClass="defaultListingTableFirstColumEnummeration">

		<!-- Organization -->
		<h:panelGrid columns="1">
			<h:outputLabel
				value="#{msg['dialog.settings.organization.edit.organization']}" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- name -->
			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.name']}" />
			<p:inputText id="organizationName"
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.name}" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- clinic -->
			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.clinicIntern']}" />
			<p:selectBooleanCheckbox id="organizationIntern"
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.intern}" />

		</h:panelGrid>


		<!-- ****************** Adress ****************** -->
		<h:panelGrid columns="1">
			<h:outputLabel
				value="#{msg['dialog.settings.organization.edit.adress']}" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- street -->
			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.adress.street']}" />
			<p:inputText id="_street" name="street-address"
				autocomplete="street-address"
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.contact.street}" />

			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.adress.building']}" />
			<p:inputText id="_building" name="building-address"
				autocomplete="building-address"
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.contact.building}" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- Town -->
			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.adress.town']}" />
			<p:inputText id="_town" name="city" autocomplete="address-level2"
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.contact.town}" />

			<!-- Postcode -->
			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.adress.postCode']}" />
			<p:inputText style="width:75px;"
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.contact.postcode}"
				name="postal-code" autocomplete="postal-code" />
		</h:panelGrid>
		<!-- ****************** Adress ****************** -->

		<!-- ****************** Contact ****************** -->
		<h:panelGrid columns="1">
			<h:outputLabel
				value="#{msg['dialog.settings.organization.edit.miscellaneous']}" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- phone -->
			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.adress.phone']}" />
			<p:inputText
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.contact.phone}"
				name="phone" autocomplete="tel" />
			<!-- mobile -->
			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.adress.mobile']}" />
			<p:inputText
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.contact.phone}"
				name="phone" autocomplete="tel" />

			<!-- homepage -->
			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.adress.homepage']}" />
			<p:inputText
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.contact.homepage}"
				name="homepage" autocomplete="homepage" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- fax -->
			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.adress.fax']}" />
			<p:inputText
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.contact.fax}"
				name="fax" autocomplete="fax" />
			<!-- mail -->
			<p:outputLabel
				value="#{msg['dialog.settings.organization.edit.adress.email']}" />
			<p:inputText id="_email" name="mail" autocomplete="mail"
				value="#{settingsDialogHandler.organizationTab.selectedOrganization.contact.email}" />
		</h:panelGrid>
		<!-- ****************** Contact ****************** -->
	</h:panelGrid>
	<h:panelGrid columns="2"
		columnClasses="defaultListingTableColumn15 defaultListingTableColumnTop, defaultListingTableColumnTop"
		styleClass="defaultListingTableFirstColumEnummeration">

		<!-- commentary -->
		<h:panelGrid columns="1">
			<h:outputLabel
				value="#{msg['dialog.settings.organization.edit.note']}" />
		</h:panelGrid>

		<p:inputTextarea id="organizationNote" style="width:85%"
			value="#{settingsDialogHandler.organizationTab.selectedOrganization.note}" />


		<!-- persons -->
		<h:panelGrid columns="1">
			<h:outputLabel
				value="#{msg['dialog.settings.organization.edit.persons']}" />
		</h:panelGrid>

		<p:dataTable id="userTable"
			styleClass="highlightedDataTable noBordersAll collapsedBordersAll"
			value="#{settingsDialogHandler.organizationTab.selectedOrganization.persons}"
			var="person" style="width:600px" scrollable="true" scrollHeight="150">
			<p:column
				headerText="#{msg['dialog.settings.organization.edit.persons.name']}">
				<h:outputLabel value="#{person.fullName}" />

			</p:column>

			<p:column headerText="#" style="width:15px">
				<p:commandLink update="@form" process="@this" partialSubmit="true"
					title="#{msg['dialog.settings.organization.edit.persons.remove']}">
					<i class="fa fa-remove" style="margin-left: 8px" />
					<f:actionListener
						binding="#{dialogHandlerAction.organizationListDialog.removeOrganizationFromPerson(person, settingsDialogHandler.organizationTab.selectedOrganization)}" />
					<f:actionListener
						binding="#{settingsDialogHandler.organizationTab.updateData()}" />
				</p:commandLink>
			</p:column>
		</p:dataTable>
	</h:panelGrid>

	<div class="buttonContainer">
		<h:panelGrid columns="2" style="width:100%"
			styleClass="newTableContainer">

			<h:panelGrid columns="3" styleClass="newTableContainer left">
				<!-- save -->
				<p:commandButton value="#{msg['general.save']}"
					icon="fa fa-fw fa-floppy-o" process="@form" partialSubmit="true"
					update="@form">
					<f:actionListener
						binding="#{settingsDialogHandler.organizationTab.saveOrganization()}" />
					<f:actionListener
						binding="#{settingsDialogHandler.organizationTab.discardOrganization()}" />
				</p:commandButton>

				<!-- abort -->
				<p:commandButton value="#{msg['general.abort']}"
					icon="fa fa-fw fa-times-circle" process="@this"
					partialSubmit="true"
					actionListener="#{settingsDialogHandler.organizationTab.discardOrganization()}"
					update="@form" />

				<!-- close -->
				<p:commandButton value="#{msg['general.close']}"
					icon="fa fa-times-circle" partialSubmit="true" process="@this"
					actionListener="#{settingsDialogHandler.hideDialog()}" />
			</h:panelGrid>
		</h:panelGrid>
	</div>


</ui:composition>
