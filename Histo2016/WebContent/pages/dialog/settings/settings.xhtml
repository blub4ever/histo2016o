<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">


<h:head>
	<title><h:outputFormat
			value="#{msg['dialog.settings.headline']}">
		</h:outputFormat></title>
	<h:outputStylesheet name="dialogStandard.css"
		value="dialogStandard.css" />
	<h:outputStylesheet name="histo.css" value="histo.css" />
	<h:outputStylesheet name="grid/grid.css" library="primefaces" />
</h:head>

<h:body styleClass="settingsDialogLayout">
	<h:form id="adminForm">
		<p:panel styleClass="settingsPannel">
			<p:tabView orientation="left"
				activeIndex="#{settingsHandlerAction.activeSettingsIndex}"
				styleClass="settingsTabView">

				<p:ajax event="tabChange"
					listener="#{settingsHandlerAction.onSettingsTabChange}"
					update="@form" />

				<!-- ************************************************************** Benutzer ************************************************************** -->
				<p:tab title="#{msg['dialog.settings.user']}">
					<ui:include src="userList.xhtml" />
				</p:tab>
				<!-- ************************************************************** Benutzer ************************************************************** -->

				<!-- ************************************************************** Stainings ************************************************************** -->
				<p:tab title="#{msg['dialog.settings.stainings']}">
					<!-- Staining List -->
					<ui:fragment rendered="#{!settingsHandlerAction.showStainingEdit}">
						<ui:include src="stainingsList.xhtml" />
					</ui:fragment>
					<!-- Staining List -->

					<!-- Edit Staining -->
					<ui:fragment rendered="#{settingsHandlerAction.showStainingEdit}">
						<ui:include src="stainingsEdit.xhtml" />
					</ui:fragment>
					<!-- Edit Staining -->
				</p:tab>
				<!-- ************************************************************** Stainings ************************************************************** -->

				<!-- ************************************************************** StainingList ************************************************************** -->
				<p:tab title="#{msg['dialog.settings.materials']}">

					<!-- ******************* StainingsList List ******************* -->
					<ui:fragment
						rendered="#{settingsHandlerAction.stainingListIndex eq 0}">
						<ui:include src="stainingListList.xhtml" />
					</ui:fragment>
					<!-- ******************* StainingsList List ******************* -->

					<!-- ******************* StainingsList Edit/New ******************* -->
					<ui:fragment
						rendered="#{settingsHandlerAction.stainingListIndex eq 1}">
						<ui:include src="stainingListEdit.xhtml" />
					</ui:fragment>
					<!-- ******************* StainingsList Edit/New ******************* -->

					<!-- ******************* StainingsList Add Staining ******************* -->
					<ui:fragment
						rendered="#{settingsHandlerAction.stainingListIndex eq 2}">
						<ui:include src="stainingListAddStaining.xhtml" />
					</ui:fragment>
					<!-- ******************* StainingsList Add Staining ******************* -->
				</p:tab>
				<!-- ************************************************************** StainingList ************************************************************** -->

				<!-- ************************************************************** Diagnoses ************************************************************** -->
				<p:tab title="#{msg['dialog.settings.diagnosis']}">
					<ui:fragment
						rendered="#{settingsHandlerAction.diagnosisIndex eq 0}">
						<ui:include src="diagnosisList.xhtml" />
					</ui:fragment>
					<ui:fragment
						rendered="#{settingsHandlerAction.diagnosisIndex eq 1}">
						<ui:include src="diagnosisEdit.xhtml" />
					</ui:fragment>
					<ui:fragment
						rendered="#{settingsHandlerAction.diagnosisIndex eq 2}">
						<ui:include src="diagnosisEditTemplate.xhtml" />
					</ui:fragment>
				</p:tab>
				<!-- ************************************************************** Diagnoses ************************************************************** -->

				<!-- ************************************************************** Persons ************************************************************** -->
				<p:tab title="#{msg['dialog.settings.persons']}">
					<ui:fragment
						rendered="#{settingsHandlerAction.physicianIndex eq 0}">
						<ui:include src="physicianList.xhtml" />
					</ui:fragment>
					<ui:fragment
						rendered="#{settingsHandlerAction.physicianIndex eq 1}">
						<ui:include src="physicianEdit.xhtml" />
					</ui:fragment>
					<ui:fragment
						rendered="#{settingsHandlerAction.physicianIndex eq 2 or settingsHandlerAction.physicianIndex eq 3}">
						<ui:include src="physicianNew.xhtml" />
					</ui:fragment>					
				</p:tab>
				<!-- ************************************************************** Persons ************************************************************** -->

				<p:tab title="#{msg['dialog.settings.miscellaneous']}">
				</p:tab>

				<!-- ************************************************************** Log ************************************************************** -->
				<p:tab title="#{msg['dialog.settings.log']}">
					<p:dataTable var="history" styleClass="historyDataTable"
						scrollable="true" scrollHeight="450"
						value="#{settingsHandlerAction.currentHistory}">

						<p:column headerText="Datum" style="width:12%">
							<h:outputText
								value="#{helperHandlerAction.dateFormatterUnix(history.date, 'hh:mm:ss dd/MM/yyyy ')}" />
						</p:column>
						<p:column headerText="Benutzer" style="width:12%">
							<h:outputText value="#{history.userAcc.username}" />
						</p:column>
						<p:column headerText="Patient" style="width:10%">
							<h:outputText value="#{history.patient.piz}"
								rendered="#{history.patient ne null}" />
							<h:outputText value="-" rendered="#{history.patient eq null}" />
						</p:column>
						<p:column headerText="Level" style="width:10%">
							<h:outputText value="#{history.level}" />
						</p:column>
						<p:column headerText="Nachricht" style="width:56%">
							<h:outputText value="#{history.messages}" />
						</p:column>
					</p:dataTable>
				</p:tab>
				<!-- ************************************************************** Log ************************************************************** -->
			</p:tabView>

		</p:panel>
	</h:form>
</h:body>
</html>