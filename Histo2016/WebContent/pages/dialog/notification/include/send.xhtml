<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<p:outputPanel styleClass="headerPannel">
		<h:outputLabel value="#{msg['dialog.notification.tab.send.headline']}" />
	</p:outputPanel>

	<p:outputPanel styleClass="	bodyPannelScroll"
		style="height: calc(100% - 250px)">
		<h:panelGrid columns="1" styleClass="newStyleListingTable"
			id="summaryTable" style="width:100%"
			columnClasses="columnLabelContainer150, ">
			<!-- **************** Mails **************** -->
			<h:panelGroup>
				<h:outputText value="#{msg['dialog.notification.tab.send.email']}: "
					styleClass="bigFont" />

				<!-- enable -->
				<h:outputText value="#{msg['dialog.notification.tab.send.active']}"
					styleClass="icon-green bigFont"
					rendered="#{dialogHandlerAction.notificationDialog.mailTab.useTab}" />

				<!-- disable -->
				<h:outputText
					value="#{msg['dialog.notification.tab.send.inacitve']}"
					rendered="#{!dialogHandlerAction.notificationDialog.mailTab.useTab}" />

			</h:panelGroup>

			<p:dataTable var="emailHolder"
				styleClass="newStyleDataTable newStyleDataTable-HideColumnHeader"
				value="#{dialogHandlerAction.notificationDialog.sendTab.currentMailHolders}">

				<!-- name and email -->
				<p:column>
					<h:outputLabel
						value="#{emailHolder.contact.person.fullName} (#{emailHolder.contactAddress})"></h:outputLabel>

					<!-- Warning -->
					<ui:fragment rendered="#{emailHolder.warning}">
						<i class="fa fa-fw fa-exclamation-circle icon-orange"
							title="#{emailHolder.warningInfo}" />
					</ui:fragment>
				</p:column>

				<!-- performed -->
				<p:column style="width: 5%">
					<ui:fragment
						rendered="#{emailHolder.notification.performed and !emailHolder.notification.failed}">
						<i class="fa fa-fw fa-check-circle icon-green" />
					</ui:fragment>

					<ui:fragment
						rendered="#{emailHolder.notification.performed and emailHolder.notification.failed}">
						<i class="fa fa-fw fa-times-circle icon-red"
							title="#{emailHolder.notification.commentary}" />
					</ui:fragment>
				</p:column>
			</p:dataTable>

			<!-- **************** Fax **************** -->
			<h:panelGroup>
				<h:outputText value="#{msg['dialog.notification.tab.send.fax']}: "
					styleClass="bigFont" />

				<!-- enable -->
				<h:outputText value="#{msg['dialog.notification.tab.send.active']}"
					styleClass="icon-green bigFont"
					rendered="#{dialogHandlerAction.notificationDialog.faxTab.useTab}" />
				<!-- disable -->
				<h:outputText
					value="#{msg['dialog.notification.tab.send.inacitve']}"
					rendered="#{!dialogHandlerAction.notificationDialog.faxTab.useTab}" />

			</h:panelGroup>

			<p:dataTable var="faxHolder"
				styleClass="newStyleDataTable newStyleDataTable-HideColumnHeader"
				value="#{dialogHandlerAction.notificationDialog.sendTab.currentFaxHolders}">

				<!-- name and fax -->
				<p:column>
					<h:outputLabel
						value="#{faxHolder.contact.person.fullName} (#{faxHolder.contactAddress})"></h:outputLabel>

					<!-- Warning -->
					<ui:fragment rendered="#{faxHolder.warning}">
						<i class="fa fa-fw fa-exclamation-circle icon-orange"
							title="#{faxHolder.warningInfo}" />
					</ui:fragment>

				</p:column>

				<!-- performed -->
				<p:column style="width: 5%">
					<ui:fragment
						rendered="#{faxHolder.notification.performed and !faxHolder.notification.failed}">
						<i class="fa fa-fw fa-check-circle icon-green" />
					</ui:fragment>

					<ui:fragment
						rendered="#{faxHolder.notification.performed and faxHolder.notification.failed}">
						<i class="fa fa-fw fa-times-circle icon-red"
							title="#{faxHolder.notification.commentary}" />
					</ui:fragment>
				</p:column>

			</p:dataTable>

			<!-- **************** Letter **************** -->
			<h:panelGroup>
				<h:outputText
					value="#{msg['dialog.notification.tab.send.letter']}: "
					styleClass="bigFont" />

				<!-- enable -->
				<h:outputText value="#{msg['dialog.notification.tab.send.active']}"
					styleClass="icon-green bigFont"
					rendered="#{dialogHandlerAction.notificationDialog.letterTab.useTab}" />
				<!-- disable -->
				<h:outputText
					value="#{msg['dialog.notification.tab.send.inacitve']}"
					rendered="#{!dialogHandlerAction.notificationDialog.letterTab.useTab}" />

			</h:panelGroup>

			<p:dataTable var="letterHolder"
				styleClass="newStyleDataTable newStyleDataTable-HideColumnHeader"
				value="#{dialogHandlerAction.notificationDialog.sendTab.currentLetterHolders}">

				<!-- name -->
				<p:column>
					<h:outputLabel value="#{letterHolder.contact.person.fullName}" />

					<!-- Warning -->
					<ui:fragment rendered="#{letterHolder.warning}">
						<i class="fa fa-fw fa-exclamation-circle icon-orange"
							title="#{letterHolder.warningInfo}" />
					</ui:fragment>

				</p:column>

				<!-- performed -->
				<p:column style="width: 5%">
					<ui:fragment
						rendered="#{letterHolder.notification.performed and !letterHolder.notification.failed}">
						<i class="fa fa-fw fa-check-circle icon-green" />
					</ui:fragment>

					<ui:fragment
						rendered="#{letterHolder.notification.performed and letterHolder.notification.failed}">
						<i class="fa fa-fw fa-times-circle icon-red"
							title="#{letterHolder.notification.commentary}" />
					</ui:fragment>
				</p:column>
			</p:dataTable>

			<!-- **************** Phone **************** -->
			<h:panelGroup>
				<h:outputText value="#{msg['dialog.notification.tab.send.phone']}: "
					styleClass="bigFont" />

				<!-- enable -->
				<h:outputText value="#{msg['dialog.notification.tab.send.active']}"
					styleClass="icon-green bigFont"
					rendered="#{dialogHandlerAction.notificationDialog.phoneTab.useTab}" />
				<!-- disable -->
				<h:outputText
					value="#{msg['dialog.notification.tab.send.inacitve']}"
					rendered="#{!dialogHandlerAction.notificationDialog.phoneTab.useTab}" />

			</h:panelGroup>

			<p:dataTable var="phoneHolder"
				styleClass="newStyleDataTable newStyleDataTable-HideColumnHeader"
				value="#{dialogHandlerAction.notificationDialog.phoneTab.holders}">
				<p:column>
					<!-- name -->
					<h:outputLabel
						value="#{phoneHolder.contact.person.fullName} (#{phoneHolder.contactAddress})" />

					<!-- Warning -->
					<ui:fragment rendered="#{phoneHolder.warning}">
						<i class="fa fa-fw fa-exclamation-circle icon-orange"
							title="#{phoneHolder.warningInfo}" />
					</ui:fragment>
				</p:column>
			</p:dataTable>
		</h:panelGrid>
	</p:outputPanel>

	<p:outputPanel id="test12345" style="heigh:200px;">

		<!-- Separator -->
		<h:panelGrid columns="1"
			styleClass="newStyleListingTable newStyleListingTableSeparator">
			<p:separator style="width:100%" />
			<h:outputLabel
				value="#{msg['dialog.notification.tab.additionalPrints']}" />
		</h:panelGrid>

		<!-- additional prints -->
		<h:panelGrid columns="4" styleClass="newStyleListingTable"
			style="width:auto !important;"
			columnClasses="columnLabelContainer100, ,columnLabelContainer100,">

			<h:outputLabel
				value="#{msg['dialog.notification.tab.additionalPrints.tempalte']}" />
			<p:selectOneMenu
				value="#{dialogHandlerAction.notificationDialog.sendTab.selectedTemplate}"
				style="margin-left:10px;"
				converter="#{dialogHandlerAction.notificationDialog.sendTab.templateTransformer}"
				styleClass="customSerachSelectMenu">

				<f:selectItem itemValue="#{null}"
					itemLabel="#{msg['dialog.notification.tab.mail.pdfTemplate.none']}"></f:selectItem>

				<f:selectItems
					value="#{dialogHandlerAction.notificationDialog.sendTab.templateList}"
					var="template" itemLabel="#{template.name}" itemValue="#{template}" />

				<p:ajax update="@this" event="change" process="@this"
					partialSubmit="true" />
			</p:selectOneMenu>

			<!-- print -->
			<h:outputLabel
				value="#{msg['dialog.notification.tab.additionalPrints.count']} "
				style="margin-left:10px"
				title="#{msg['dialog.notification.tab.send.count']}" />

			<p:spinner
				value="#{dialogHandlerAction.notificationDialog.sendTab.printCount}"
				styleClass="oneNumberSpinner" min="0" max="9" />
		</h:panelGrid>

		<h:panelGrid columns="1" styleClass="newStyleListingTable"
			style="width:100%; margin-top:20px;">
			<h:outputText
				value="#{dialogHandlerAction.notificationDialog.sendTab.progressText} (#{dialogHandlerAction.notificationDialog.sendTab.progressPercent}%)"
				id="progressLable"
				style="border: 1px solid; width:90%;display:block; text-align:center; background: linear-gradient(90deg, #fcf1b8 #{dialogHandlerAction.notificationDialog.sendTab.progressPercent}%, transparent 0%);margin: 0px auto;" />

			<p:poll autoStart="false" widgetVar="ajaxProgressPoll"
				stop="#{dialogHandlerAction.notificationDialog.sendTab.notificationCompleted}"
				update="progressLable summaryTable" interval="1" />
		</h:panelGrid>

	</p:outputPanel>

	<div class="buttonContainer">
		<h:panelGrid columns="2" style="width:100%"
			styleClass="newTableContainer">

			<h:panelGrid columns="2" styleClass="newTableContainer left">
				<!-- print -->
				<h:outputLabel value="#{msg['dialog.notification.tab.send.print']} "
					title="#{msg['dialog.notification.tab.send.print.text']}" />

				<p:selectOneMenu styleClass="customSerachSelectMenu" id="printerfax"
					title="#{msg['dialog.print.selectPrinter']}"
					panelStyleClass="iconFixForSelectOneMenu"
					converter="#{globalSettings.printerListTransformer}"
					value="#{userHandlerAction.selectedPrinter}" filter="true"
					filterMatchMode="contains" style="margin-left:10px;">

					<f:selectItems value="#{globalSettings.printerList}" var="printer"
						itemLabel="#{printer.name}" itemValue="#{printer}" />

					<p:ajax event="change" process="@form" update="@form"></p:ajax>
				</p:selectOneMenu>

			</h:panelGrid>

			<h:panelGrid columns="3" styleClass="newTableContainer right">
				<h:panelGroup>
					<p:commandButton
						value="#{msg['dialog.notification.tab.send.perform']}"
						icon="fa fa-fw fa-mail-forward"
						title="#{msg['dialog.notification.tab.send.perform.text']}"
						rendered="#{!dialogHandlerAction.notificationDialog.sendTab.notificationCompleted}"
						onstart="PF('blockUIWidget').block()"
						onclick="performeNotificationCommand();PF('startNotificationButton').disable();PF('ajaxProgressPoll').start();"
						widgetVar="startNotificationButton" />

					<p:remoteCommand async="true" name="performeNotificationCommand"
						actionListener="#{dialogHandlerAction.notificationDialog.sendTab.performeNotification()}"></p:remoteCommand>

					<p:remoteCommand name="onNotificationCompleted" update="@form"
						onstart="PF('blockUIWidget').unblock()"
						actionListener="#{dialogHandlerAction.notificationDialog.nextTab()}"></p:remoteCommand>
				</h:panelGroup>

				<!-- close -->
				<p:commandButton value="#{msg['general.close']}"
					icon="fa fa-times-circle"
					actionListener="#{dialogHandlerAction.notificationDialog.hideDialog()}" />

			</h:panelGrid>
		</h:panelGrid>
	</div>


</ui:composition>
