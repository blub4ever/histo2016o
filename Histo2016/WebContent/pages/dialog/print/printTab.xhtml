<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:histo="http://java.sun.com/jsf/composite/components">

	<h:panelGrid columns="3" styleClass="defaultListingTableContainer"
		columnClasses="defaultListingTableColumnTop defaultListingTableColumn30,">
		<!-- left column -->

		<h:panelGrid columns="1" styleClass="defaultListingTableContainer">
			<h:panelGrid columns="2" styleClass="defaultListingTableCssOneCol"
				columnClasses="defaultListingTableColumn20,">

				<!-- document type -->
				<h:outputLabel value="Dokument" />
				<p:selectOneMenu value="#{printHandlerAction.selectedTemplate}"
					style="width:90% !important;"
					converter="#{printHandlerAction.templateTransformer}"
					styleClass="customSerachSelectMenu">
					<f:selectItems value="#{printHandlerAction.templateList}"
						var="template" itemLabel="#{template.name}"
						itemValue="#{template}" />

					<p:ajax update="@form" event="change"
						onstart="PF('blockUIWidget').block()"
						oncomplete="PF('blockUIWidget').unblock()"
						listener="#{printHandlerAction.onChangePrintTemplate()}"></p:ajax>
				</p:selectOneMenu>

				<!-- printer -->
				<h:outputLabel value="Drucker" />
				<!-- select printer -->
				<p:selectOneMenu styleClass="customSerachSelectMenu"
					style="width:90% !important;"
					panelStyleClass="customSerachSelectMenuPanel"
					value="#{printHandlerAction.selectedPrinter}" filter="true"
					filterMatchMode="contains">

					<f:selectItems
						value="#{mainHandlerAction.settings.printerManager.printers}"
						var="printer" itemLabel="#{printer.name}"
						itemValue="#{printer.name}" />

				</p:selectOneMenu>

				<h:panelGroup>
					<h:outputLabel value=" " />
				</h:panelGroup>
				<h:panelGroup>
					<h:outputLabel value=" " />
				</h:panelGroup>

			</h:panelGrid>
			<!-- to -->
			<h:panelGrid columns="1" styleClass="defaultListingTableCssOneCol">
				<h:outputLabel value="Adressaten" />
				<p:dataTable var="chooser"
					value="#{printHandlerAction.contactChoosers}">
					<p:column headerText="#" style="width:18px;">
						<p:selectBooleanCheckbox value="#{chooser.selected}">
							<p:ajax event="change" process="@form"
								onstart="PF('blockUIWidget').block()"
								oncomplete="PF('blockUIWidget').unblock()"
								listener="#{printHandlerAction.onChooseContact()}"></p:ajax>
						</p:selectBooleanCheckbox>
					</p:column>

					<p:column headerText="Anz." style="width:30px;">
						<p:spinner value="#{chooser.copies}" styleClass="miniSpinner"
							min="1" max="9"></p:spinner>
					</p:column>

					<p:column headerText="">
						<h:outputText
							value="#{msg['enum.contactRole.'.concat(chooser.contact.role)]}" />
					</p:column>

					<p:column headerText="Name">
						<h:outputText value="#{chooser.contact.person.fullName}" />
					</p:column>

				</p:dataTable>
			</h:panelGrid>
		</h:panelGrid>

		<h:panelGroup />

		<!-- right column -->
		<h:panelGrid columns="1" styleClass="defaultListingTableContainer">

			<h:panelGroup id="pdfRender">
				<p:media player="pdf" value="#{printHandlerAction.pdfContent}"
					width="100%" rendered="#{printHandlerAction.renderPdf}"
					height="630px"></p:media>
			</h:panelGroup>
		</h:panelGrid>
	</h:panelGrid>
</ui:composition>
